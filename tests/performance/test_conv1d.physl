#!/usr/bin/env physl

define(conv, input1, input2, input3, filter1, filter2, filter3,
    block(
        define(array,
            random_d(list(input1, input2, input3), nil, nil, "", "page")),
        define(kernel,
            random(list(filter1, filter2, filter3))),
        timer(
            conv1d_d(array, kernel),
            lambda(time, cout("locality", find_here(), ":", time))
        )
    )
)
apply(conv, sys_argv)
